Index: app/src/main/java/com/example/poetrytour/ui/post/PostActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.poetrytour.ui.post\r\n\r\nimport android.annotation.SuppressLint\r\nimport android.os.Build\r\nimport android.os.Bundle\r\nimport android.text.Html\r\nimport android.util.Log\r\nimport android.view.View\r\nimport android.widget.Button\r\nimport androidx.annotation.RequiresApi\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.lifecycle.ViewModelProvider\r\nimport androidx.recyclerview.widget.LinearLayoutManager\r\nimport com.bumptech.glide.Glide\r\nimport com.bumptech.glide.load.resource.bitmap.CircleCrop\r\nimport com.bumptech.glide.load.resource.bitmap.RoundedCorners\r\nimport com.bumptech.glide.request.RequestOptions\r\nimport com.example.poetrytour.R\r\nimport com.example.poetrytour.model.Comment\r\nimport com.example.poetrytour.model.Post\r\nimport com.example.poetrytour.tool.ContextTool\r\nimport com.example.poetrytour.tool.TimeTool\r\nimport com.example.poetrytour.ui.User\r\nimport com.youth.banner.Banner\r\nimport com.youth.banner.adapter.BannerImageAdapter\r\nimport com.youth.banner.holder.BannerImageHolder\r\nimport com.youth.banner.indicator.CircleIndicator\r\nimport kotlinx.android.synthetic.main.activity_msg.*\r\nimport kotlinx.android.synthetic.main.activity_post.*\r\nimport kotlinx.android.synthetic.main.post_item.*\r\nimport java.util.concurrent.CopyOnWriteArrayList\r\n\r\nclass PostActivity : AppCompatActivity() {\r\n\r\n    private val TAG=\"PostActivity\"\r\n\r\n    private var post_id:Long?=null\r\n    private var post:Post?=null\r\n    private var com_lists:List<Comment>?=CopyOnWriteArrayList<Comment>()\r\n    private var adapter:PostComAdapter?=null\r\n\r\n\r\n    val viewModel by lazy { ViewModelProvider(this).get(PostViewModel::class.java) }\r\n\r\n    @SuppressLint(\"ResourceAsColor\")\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_post)\r\n\r\n        setSupportActionBar(post_toolbar)\r\n        post_toolbar.setNavigationOnClickListener{\r\n            finish()\r\n        }\r\n        supportActionBar?.setDisplayHomeAsUpEnabled(true)\r\n        supportActionBar?.setTitle(\" \")\r\n        //recycleview\r\n        val layoutManager = LinearLayoutManager(this)\r\n\r\n\r\n\r\n        val intent=getIntent()\r\n        post_id= intent.getStringExtra(\"post_id\")?.toLong()\r\n        post_id?.let {\r\n            viewModel.setPostIdLiveData(it)\r\n            viewModel.setPostComListLiveData(System.currentTimeMillis())\r\n        }\r\n\r\n        viewModel.postDetail.observe(this){\r\n            post=it\r\n            it.publisher_id?.let { it1 -> viewModel.setPublisherIdLiveDate(it1) }\r\n            init()\r\n        }\r\n\r\n        viewModel.publisher.observe(this){\r\n            post_publisher_name.setText(it.user_name)\r\n            Glide.with(ContextTool.getContext())\r\n                .load(it.avatar)\r\n                .apply(RequestOptions.bitmapTransform(CircleCrop()))\r\n                .into(post_publisher_img)\r\n        }\r\n\r\n        //关注按钮\r\n        var guanzhu:Button=findViewById(R.id.post_publisher_guanzhu_button)\r\n        guanzhu.setOnClickListener {\r\n            if(guanzhu.text.toString().equals(\"关注\")){\r\n                guanzhu.setBackgroundResource(R.drawable.yiguanzhu_button)\r\n                guanzhu.setTextColor(R.color.grey)\r\n                guanzhu.setText(\"已关注\")\r\n            }else{\r\n                guanzhu.setBackgroundResource(R.drawable.guanzhu_button)\r\n                guanzhu.setTextColor(R.color.red)\r\n                guanzhu.setText(Html.fromHtml(\"<font color='#da4141'>关注\"))\r\n            }\r\n        }\r\n\r\n        //点赞按钮\r\n        post_love.setOnClickListener{\r\n            if(post_love.tag.toString().equals(\"res/drawable/img_love.png\")\r\n                        || post_love.tag.toString().equals(R.drawable.img_love.toString())){\r\n                post_love.setImageResource(R.drawable.img_loved)\r\n                post_love.tag=R.drawable.img_loved\r\n            }else{\r\n                post_love.setImageResource(R.drawable.img_love)\r\n                post_love.tag=R.drawable.img_love\r\n            }\r\n        }\r\n\r\n        //收藏按钮\r\n        post_collect.setOnClickListener {\r\n            if(post_collect.tag.toString().equals(\"res/drawable/img_collect.png\")\r\n                || post_collect.tag.toString().equals(R.drawable.img_collect.toString())  ){\r\n                post_collect.setImageResource(R.drawable.img_collected)\r\n                post_collect.tag=R.drawable.img_collected\r\n            }else{\r\n                post_collect.setImageResource(R.drawable.img_collect)\r\n                post_collect.tag=R.drawable.img_collect\r\n            }\r\n        }\r\n\r\n        viewModel.comList.observe(this){\r\n            com_lists=it\r\n            val lists=com_lists\r\n            Log.d(TAG,lists.toString())\r\n            adapter= lists?.let { it1 -> PostComAdapter(it1) }\r\n            post_com_list.layoutManager = layoutManager\r\n            post_com_list.adapter=adapter\r\n            post_com_area.bringToFront()\r\n\r\n            if(it.size==0){\r\n                post_com_tip.setText(\"暂时还没有评论哦...\")\r\n            }else{\r\n                post_com_tip.setText(\"\")\r\n            }\r\n        }\r\n\r\n        viewModel.postAddCom.observe(this){\r\n            viewModel.setPostComListLiveData(System.currentTimeMillis())\r\n        }\r\n\r\n        //发送评论按钮\r\n        post_com_send.setOnClickListener {\r\n            val context=post_com_inputText.text.toString()\r\n            if(context.isNotEmpty()){\r\n                var comment=Comment()\r\n                comment.com_context=context\r\n                comment.post_id=post_id\r\n                comment.user_id=User.user_id\r\n                comment.parent_com_id=0\r\n                viewModel.setPostComLiveData(comment)\r\n            }\r\n\r\n            post_com_inputText.setText(\"\")\r\n        }\r\n\r\n    }\r\n\r\n    fun init(){\r\n        post_info.setText(post?.post_title)\r\n        var text=post?.post_context\r\n        if (text != null) {\r\n            text=text.replace(\"\\n\",\"\\n\\t\\t\")\r\n            text=\"\\t\\t$text\"\r\n        }\r\n        post_context.setText(text)\r\n\r\n        val publisher_time= post?.post_time?.let { TimeTool.transToString(it) }\r\n            ?.let { TimeTool.getShortByString(it) }\r\n        post_publisher_time.setText(\"发布于\"+publisher_time)\r\n\r\n        var list=ArrayList<String>()\r\n        list.add(\"https://pic5.40017.cn/03/000/65/be/rBANB1x9_PWAHAKrAAIa9PeeFYU026.jpg\")\r\n        list.add(\"https://ts1.cn.mm.bing.net/th/id/R-C.a1d32e7f408b780897c8df5704c0b8b2?rik=YplzbHRsO2BAbw&riu=http%3a%2f%2fy1.ifengimg.com%2f52e0de6343af0d30%2f2014%2f0314%2frdn_5322bf979fc0c.jpg&ehk=ZUcoG31%2b8Cu%2bv8rZv%2bkrSP4guHn%2bYrp27lDuzrjWxeY%3d&risl=&pid=ImgRaw&r=0\")\r\n        list.add(\"https://youimg1.c-ctrip.com/target/100n0l000000cykmc1908_D_10000_1200.jpg?proc=autoorient\")\r\n        list.add(\"https://ts1.cn.mm.bing.net/th/id/R-C.10e02a293ec5be65cff48af9de3381ab?rik=gw6vf6RTBCecTg&riu=http%3a%2f%2fpic3.40017.cn%2fscenery%2fdestination%2f2015%2f05%2f18%2f15%2fw8tEhO.jpg&ehk=HQeHFU3NNasg3rcScNUVjo0MiTFLUh4o1aIozmGDqM0%3d&risl=&pid=ImgRaw&r=0\")\r\n        list.add(\"https://pic5.40017.cn/03/000/65/be/rBANB1x9_PWAMPyYAAIbmnlyUXM786.jpg\")\r\n        var banner: Banner<String, BannerImageAdapter<String>> = findViewById<View>(R.id.post_img_banner) as Banner<String, BannerImageAdapter<String>>\r\n        banner.setAdapter(object : BannerImageAdapter<String>(list) {\r\n            override fun onBindView(holder: BannerImageHolder, data: String, position: Int, size: Int) {\r\n                //图片加载自己实现\r\n                Glide.with(holder.itemView)\r\n                    .load(data)\r\n                    .apply(RequestOptions.bitmapTransform(RoundedCorners(30)))\r\n                    .into(holder.imageView) }\r\n        }).addBannerLifecycleObserver(this).setIndicator(CircleIndicator(this))\r\n        banner.outlineProvider\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/poetrytour/ui/post/PostActivity.kt b/app/src/main/java/com/example/poetrytour/ui/post/PostActivity.kt
--- a/app/src/main/java/com/example/poetrytour/ui/post/PostActivity.kt	(revision 6b48c0207737fdb97ddaa6f92d9ffe704ef5fa3a)
+++ b/app/src/main/java/com/example/poetrytour/ui/post/PostActivity.kt	(date 1676550947203)
@@ -93,29 +93,29 @@
             }
         }
 
-        //点赞按钮
-        post_love.setOnClickListener{
-            if(post_love.tag.toString().equals("res/drawable/img_love.png")
-                        || post_love.tag.toString().equals(R.drawable.img_love.toString())){
-                post_love.setImageResource(R.drawable.img_loved)
-                post_love.tag=R.drawable.img_loved
-            }else{
-                post_love.setImageResource(R.drawable.img_love)
-                post_love.tag=R.drawable.img_love
-            }
-        }
-
-        //收藏按钮
-        post_collect.setOnClickListener {
-            if(post_collect.tag.toString().equals("res/drawable/img_collect.png")
-                || post_collect.tag.toString().equals(R.drawable.img_collect.toString())  ){
-                post_collect.setImageResource(R.drawable.img_collected)
-                post_collect.tag=R.drawable.img_collected
-            }else{
-                post_collect.setImageResource(R.drawable.img_collect)
-                post_collect.tag=R.drawable.img_collect
-            }
-        }
+//        //点赞按钮
+//        post_love.setOnClickListener{
+//            if(post_love.tag.toString().equals("res/drawable/img_love.png")
+//                        || post_love.tag.toString().equals(R.drawable.img_love.toString())){
+//                post_love.setImageResource(R.drawable.img_loved)
+//                post_love.tag=R.drawable.img_loved
+//            }else{
+//                post_love.setImageResource(R.drawable.img_love)
+//                post_love.tag=R.drawable.img_love
+//            }
+//        }
+//
+//        //收藏按钮
+//        post_collect.setOnClickListener {
+//            if(post_collect.tag.toString().equals("res/drawable/img_collect.png")
+//                || post_collect.tag.toString().equals(R.drawable.img_collect.toString())  ){
+//                post_collect.setImageResource(R.drawable.img_collected)
+//                post_collect.tag=R.drawable.img_collected
+//            }else{
+//                post_collect.setImageResource(R.drawable.img_collect)
+//                post_collect.tag=R.drawable.img_collect
+//            }
+//        }
 
         viewModel.comList.observe(this){
             com_lists=it
Index: app/src/main/res/layout/activity_post.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n   >\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:orientation=\"vertical\">\r\n        <androidx.appcompat.widget.Toolbar\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:id=\"@+id/post_toolbar\"\r\n            android:background=\"#00C5CD\"\r\n            app:titleTextColor=\"@color/black\"\r\n            android:theme=\"@style/Theme.MaterialComponents.DayNight.DarkActionBar\">\r\n            <RelativeLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_gravity=\"center_vertical\">\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/post_publisher_img\"\r\n                    android:layout_width=\"35dp\"\r\n                    android:layout_height=\"35dp\" />\r\n                <TextView\r\n                    android:id=\"@+id/post_publisher_name\"\r\n                    android:layout_toRightOf=\"@id/post_publisher_img\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_centerVertical=\"true\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:maxEms=\"8\"\r\n                    android:text=\"昵称\"\r\n                    android:textColor=\"@color/black\"\r\n                    />\r\n\r\n                <Button\r\n                    android:id=\"@+id/post_publisher_guanzhu_button\"\r\n                    android:layout_width=\"60dp\"\r\n                    android:layout_height=\"30dp\"\r\n                    android:layout_centerVertical=\"true\"\r\n                    android:layout_marginRight=\"10dp\"\r\n                    android:textColor=\"@color/red\"\r\n                    android:background=\"@drawable/guanzhu_button\"\r\n                    android:layout_toLeftOf=\"@id/post_love\"\r\n                    android:text=\"关注\" />\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/post_love\"\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"30dp\"\r\n                    android:layout_marginRight=\"10dp\"\r\n                    android:layout_toLeftOf=\"@id/post_collect\"\r\n                    android:tag=\"@drawable/img_love\"\r\n                    android:src=\"@drawable/img_love\" />\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/post_collect\"\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"30dp\"\r\n                    android:layout_marginRight=\"10dp\"\r\n                    android:layout_alignParentRight=\"true\"\r\n                    android:tag=\"@drawable/img_collect\"\r\n                    android:src=\"@drawable/img_collect\"\r\n                    />\r\n            </RelativeLayout>\r\n        </androidx.appcompat.widget.Toolbar>\r\n        <ScrollView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginBottom=\"60dp\"\r\n            android:layout_below=\"@+id/post_toolbar\">\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/post_toolbar\">\r\n\r\n            <com.youth.banner.Banner\r\n                android:id=\"@+id/post_img_banner\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"200dp\"\r\n                tools:layout_editor_absoluteX=\"0dp\" />\r\n        <com.google.android.material.card.MaterialCardView\r\n            android:id=\"@+id/post_major\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            app:cardCornerRadius=\"4dp\"\r\n            android:layout_below=\"@+id/post_img_banner\"\r\n            android:layout_marginTop=\"10dp\"\r\n            app:elevation=\"5dp\">\r\n            <RelativeLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\">\r\n            <TextView\r\n                android:layout_marginTop=\"5dp\"\r\n                android:id=\"@+id/post_info\"\r\n                android:layout_width=\"match_parent\"\r\n                android:text=\"ip:泰国\"\r\n                android:textSize=\"18sp\"\r\n                android:layout_marginLeft=\"8dp\"\r\n                android:textColor=\"@color/black\"\r\n                android:textStyle=\"bold\"\r\n                android:layout_height=\"wrap_content\"/>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/post_context\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_below=\"@id/post_info\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_marginTop=\"10dp\"\r\n                    android:textColor=\"@color/black\"\r\n                    android:lineSpacingMultiplier=\"1.2\"\r\n                    android:text=\"they is also\"\r\n                    android:textSize=\"15sp\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/post_publisher_time\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_below=\"@id/post_context\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_marginTop=\"10dp\"\r\n                    android:layout_marginBottom=\"8dp\"\r\n                    android:text=\"时间\"\r\n                    android:textSize=\"12sp\" />\r\n\r\n        </RelativeLayout>\r\n        </com.google.android.material.card.MaterialCardView>\r\n            <TextView\r\n                android:id=\"@+id/post_com_tip\"\r\n                android:layout_centerHorizontal=\"true\"\r\n                android:layout_below=\"@id/post_major\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:textSize=\"13sp\"\r\n                android:text=\"评论提示\"/>\r\n            <androidx.recyclerview.widget.RecyclerView\r\n                android:id=\"@+id/post_com_list\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@id/post_com_tip\"\r\n\r\n                android:layout_weight=\"1\"/>\r\n\r\n        </RelativeLayout>\r\n        </ScrollView>\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/post_com_area\"\r\n            android:background=\"#00C5CD\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"60dp\"\r\n            android:layout_alignParentBottom=\"true\"\r\n            android:orientation=\"horizontal\">\r\n            <EditText\r\n                android:id=\"@+id/post_com_inputText\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_margin=\"10dp\"\r\n                android:layout_weight=\"1\"\r\n                android:background=\"@drawable/text_input\"\r\n                android:hint=\"发布评论...\"\r\n                android:padding=\"10dp\" />\r\n\r\n            <Button\r\n                android:id=\"@+id/post_com_send\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:layout_marginRight=\"5dp\"\r\n                android:layout_marginBottom=\"10dp\"\r\n                android:layout_gravity=\"center_vertical\"\r\n                android:background=\"@drawable/send_button\"\r\n                android:text=\"发送\" />\r\n        </LinearLayout>\r\n\r\n    </RelativeLayout>\r\n\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_post.xml b/app/src/main/res/layout/activity_post.xml
--- a/app/src/main/res/layout/activity_post.xml	(revision 6b48c0207737fdb97ddaa6f92d9ffe704ef5fa3a)
+++ b/app/src/main/res/layout/activity_post.xml	(date 1676550899935)
@@ -55,8 +55,10 @@
                     android:layout_height="30dp"
                     android:layout_marginRight="10dp"
                     android:layout_toLeftOf="@id/post_collect"
-                    android:tag="@drawable/img_love"
-                    android:src="@drawable/img_love" />
+                    />
+<!--                    android:tag="@drawable/img_love"-->
+<!--                    android:src="@drawable/img_love" -->
+
 
                 <ImageView
                     android:id="@+id/post_collect"
@@ -64,9 +66,9 @@
                     android:layout_height="30dp"
                     android:layout_marginRight="10dp"
                     android:layout_alignParentRight="true"
-                    android:tag="@drawable/img_collect"
-                    android:src="@drawable/img_collect"
                     />
+                <!--                    android:tag="@drawable/img_collect"-->
+                <!--                    android:src="@drawable/img_collect"-->
             </RelativeLayout>
         </androidx.appcompat.widget.Toolbar>
         <ScrollView
Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.poetrytour\">\r\n    <!-- 使用网络权限 -->\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n\r\n    <application\r\n        android:name=\".tool.ContextTool\"\r\n        android:allowBackup=\"true\"\r\n        android:dataExtractionRules=\"@xml/data_extraction_rules\"\r\n        android:fullBackupContent=\"@xml/backup_rules\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:networkSecurityConfig=\"@xml/network_security_config\"\r\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/Theme.PoetryTour\"\r\n        tools:targetApi=\"31\">\r\n        <activity\r\n            android:name=\".ui.post.PostActivity\"\r\n            android:exported=\"false\" />\r\n\r\n        <service android:name=\".ui.message.WebSocketService\"\r\n            android:exported=\"true\"/>\r\n        <activity android:name=\".ui.message.MsgActivity\"\r\n            android:exported=\"true\"/>\r\n\r\n        <activity\r\n            android:name=\".ui.login.RegisterActivity\"\r\n            android:exported=\"false\" />\r\n        <activity\r\n            android:name=\".ui.login.LoginResetPasswordActivity\"\r\n            android:exported=\"false\" />\r\n        <activity\r\n            android:name=\".ui.login.LoginActivity\"\r\n            android:exported=\"true\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity\r\n            android:name=\".MainActivity\"\r\n            android:exported=\"true\" />\r\n    </application>\r\n\r\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
--- a/app/src/main/AndroidManifest.xml	(revision 6b48c0207737fdb97ddaa6f92d9ffe704ef5fa3a)
+++ b/app/src/main/AndroidManifest.xml	(date 1676463740927)
@@ -4,6 +4,7 @@
     package="com.example.poetrytour">
     <!-- 使用网络权限 -->
     <uses-permission android:name="android.permission.INTERNET" />
+    <uses-permission android:name="android.permission.CAMERA" />
 
     <application
         android:name=".tool.ContextTool"
@@ -17,6 +18,9 @@
         android:supportsRtl="true"
         android:theme="@style/Theme.PoetryTour"
         tools:targetApi="31">
+        <activity
+            android:name=".ui.mine.MineMaterialActivity"
+            android:exported="false" />
         <activity
             android:name=".ui.post.PostActivity"
             android:exported="false" />
@@ -40,6 +44,10 @@
 
                 <category android:name="android.intent.category.LAUNCHER" />
             </intent-filter>
+            <!-- <intent-filter> -->
+            <!-- <action android:name="android.intent.action.MAIN" /> -->
+            <!-- <category android:name="android.intent.category.LAUNCHER" /> -->
+            <!-- </intent-filter> -->
         </activity>
         <activity
             android:name=".MainActivity"
Index: app/src/main/res/layout/activity_mine.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:orientation=\"vertical\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\">\r\n\r\n    <TextView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:gravity=\"center\"\r\n        android:textSize=\"25sp\"\r\n        android:text=\"我的页面\"\r\n        />\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_mine.xml b/app/src/main/res/layout/activity_mine.xml
--- a/app/src/main/res/layout/activity_mine.xml	(revision 6b48c0207737fdb97ddaa6f92d9ffe704ef5fa3a)
+++ b/app/src/main/res/layout/activity_mine.xml	(date 1676459867957)
@@ -1,14 +1,195 @@
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
     android:orientation="vertical"
     android:layout_width="match_parent"
     android:layout_height="match_parent">
-
-    <TextView
+    <LinearLayout
+        android:layout_width="match_parent"
+        android:layout_height="160dp"
+        android:background="#98D8D8"
+        android:orientation="horizontal">
+        <com.makeramen.roundedimageview.RoundedImageView
+            android:id="@+id/mine_tx"
+            android:layout_width="80dp"
+            android:layout_height="80dp"
+            android:src="@drawable/img_tx"
+            android:layout_marginTop="30dp"
+            android:layout_marginLeft="22dp"
+            app:riv_corner_radius_bottom_left="40dp"
+            app:riv_corner_radius_top_left="40dp"
+            app:riv_corner_radius_bottom_right="40dp"
+            app:riv_corner_radius_top_right="40dp"/>
+        <LinearLayout
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:layout_marginTop="31dp"
+            android:layout_marginLeft="25dp"
+            android:orientation="vertical">
+            <TextView
+                android:id="@+id/mine_name"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:textSize="22sp"
+                android:text="张天宇"/>
+            <TextView
+                android:id="@+id/mine_nicheng"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:layout_marginTop="6dp"
+                android:textSize="15sp"
+                android:text="江山如此多娇"/>
+        </LinearLayout>
+    </LinearLayout>
+    <LinearLayout
+        android:id="@+id/mine_material"
+        android:layout_marginLeft="11dp"
+        android:layout_marginTop="11dp"
+        android:layout_width="match_parent"
+        android:layout_height="50dp">
+        <ImageView
+            android:layout_marginTop="5dp"
+            android:src="@drawable/img_material"
+            android:layout_width="30dp"
+            android:layout_height="30dp"/>
+        <TextView
+            android:layout_marginTop="9dp"
+            android:layout_marginLeft="8dp"
+            android:text="我的资料"
+            android:textSize="16sp"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"/>
+        <ImageView
+            android:src="@drawable/img_next"
+            android:layout_marginLeft="260dp"
+            android:layout_marginTop="9dp"
+            android:layout_width="20dp"
+            android:layout_height="20dp"/>
+    </LinearLayout>
+    <LinearLayout
+        android:id="@+id/mine_collection"
+        android:layout_marginLeft="11dp"
+        android:layout_marginTop="11dp"
         android:layout_width="match_parent"
-        android:layout_height="match_parent"
-        android:gravity="center"
-        android:textSize="25sp"
-        android:text="我的页面"
-        />
+        android:layout_height="50dp">
+        <ImageView
+            android:layout_marginTop="5dp"
+            android:src="@drawable/img_collection"
+            android:layout_width="30dp"
+            android:layout_height="30dp"/>
+        <TextView
+            android:layout_marginTop="9dp"
+            android:layout_marginLeft="8dp"
+            android:text="我的收藏"
+            android:textSize="16sp"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"/>
+        <ImageView
+            android:src="@drawable/img_next"
+            android:layout_marginLeft="260dp"
+            android:layout_marginTop="9dp"
+            android:layout_width="20dp"
+            android:layout_height="20dp"/>
+    </LinearLayout>
+    <LinearLayout
+        android:id="@+id/mine_text"
+        android:layout_marginLeft="11dp"
+        android:layout_marginTop="11dp"
+        android:layout_width="match_parent"
+        android:layout_height="50dp">
+        <ImageView
+            android:layout_marginTop="5dp"
+            android:src="@drawable/img_text"
+            android:layout_width="30dp"
+            android:layout_height="30dp"/>
+        <TextView
+            android:layout_marginTop="9dp"
+            android:layout_marginLeft="8dp"
+            android:text="我的帖子"
+            android:textSize="16sp"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"/>
+        <ImageView
+            android:src="@drawable/img_next"
+            android:layout_marginLeft="260dp"
+            android:layout_marginTop="9dp"
+            android:layout_width="20dp"
+            android:layout_height="20dp"/>
+    </LinearLayout>
+    <LinearLayout
+        android:id="@+id/mine_error"
+        android:layout_marginLeft="11dp"
+        android:layout_marginTop="11dp"
+        android:layout_width="match_parent"
+        android:layout_height="50dp">
+        <ImageView
+            android:layout_marginTop="5dp"
+            android:src="@drawable/img_error"
+            android:layout_width="30dp"
+            android:layout_height="30dp"/>
+        <TextView
+            android:layout_marginTop="9dp"
+            android:layout_marginLeft="8dp"
+            android:text="意见反馈"
+            android:textSize="16sp"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"/>
+        <ImageView
+            android:src="@drawable/img_next"
+            android:layout_marginLeft="260dp"
+            android:layout_marginTop="9dp"
+            android:layout_width="20dp"
+            android:layout_height="20dp"/>
+    </LinearLayout>
+    <LinearLayout
+        android:id="@+id/mine_privacy"
+        android:layout_marginLeft="11dp"
+        android:layout_marginTop="11dp"
+        android:layout_width="match_parent"
+        android:layout_height="50dp">
+        <ImageView
+            android:layout_marginTop="5dp"
+            android:src="@drawable/img_privacy"
+            android:layout_width="30dp"
+            android:layout_height="30dp"/>
+        <TextView
+            android:layout_marginTop="9dp"
+            android:layout_marginLeft="8dp"
+            android:text="隐私"
+            android:textSize="16sp"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"/>
+        <ImageView
+            android:src="@drawable/img_next"
+            android:layout_marginLeft="292dp"
+            android:layout_marginTop="9dp"
+            android:layout_width="20dp"
+            android:layout_height="20dp"/>
+    </LinearLayout>
+    <LinearLayout
+        android:id="@+id/mine_setting"
+        android:layout_marginLeft="11dp"
+        android:layout_marginTop="11dp"
+        android:layout_width="match_parent"
+        android:layout_height="50dp">
+        <ImageView
+            android:layout_marginTop="5dp"
+            android:src="@drawable/img_error"
+            android:layout_width="30dp"
+            android:layout_height="30dp"/>
+        <TextView
+            android:layout_marginTop="9dp"
+            android:layout_marginLeft="8dp"
+            android:text="设置"
+            android:textSize="16sp"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"/>
+        <ImageView
+            android:src="@drawable/img_next"
+            android:layout_marginLeft="292dp"
+            android:layout_marginTop="9dp"
+            android:layout_width="20dp"
+            android:layout_height="20dp"/>
+    </LinearLayout>
+
 </LinearLayout>
\ No newline at end of file
Index: app/src/main/java/com/example/poetrytour/ui/fragments/MineFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.poetrytour.ui.fragments\r\n\r\nimport android.os.Bundle\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport androidx.fragment.app.Fragment\r\nimport com.example.poetrytour.R\r\n\r\nclass MineFragment: Fragment()  {\r\n\r\n    override fun onCreateView(\r\n        inflater: LayoutInflater,\r\n        container: ViewGroup?,\r\n        savedInstanceState: Bundle?\r\n    ): View? {\r\n        return inflater.inflate(R.layout.activity_mine, container, false)\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/poetrytour/ui/fragments/MineFragment.kt b/app/src/main/java/com/example/poetrytour/ui/fragments/MineFragment.kt
--- a/app/src/main/java/com/example/poetrytour/ui/fragments/MineFragment.kt	(revision 6b48c0207737fdb97ddaa6f92d9ffe704ef5fa3a)
+++ b/app/src/main/java/com/example/poetrytour/ui/fragments/MineFragment.kt	(date 1676551385694)
@@ -1,13 +1,30 @@
 package com.example.poetrytour.ui.fragments
 
+import android.content.Intent
 import android.os.Bundle
 import android.view.LayoutInflater
 import android.view.View
 import android.view.ViewGroup
+import android.widget.LinearLayout
+import android.widget.TextView
 import androidx.fragment.app.Fragment
+import com.example.poetrytour.MainActivity
 import com.example.poetrytour.R
+import com.example.poetrytour.ui.User
+import com.example.poetrytour.ui.mine.MineMaterialActivity
+import com.makeramen.roundedimageview.RoundedImageView
 
-class MineFragment: Fragment()  {
+class MineFragment: Fragment(), View.OnClickListener {
+    private lateinit var intent:Intent
+    private lateinit var mine_name:TextView
+    private lateinit var mine_nicheng:TextView
+    private lateinit var mine_tx: RoundedImageView
+    private lateinit var linearLayout1:LinearLayout
+    private lateinit var linearLayout2:LinearLayout
+    private lateinit var linearLayout3:LinearLayout
+    private lateinit var linearLayout4:LinearLayout
+    private lateinit var linearLayout5:LinearLayout
+    private lateinit var linearLayout6:LinearLayout
 
     override fun onCreateView(
         inflater: LayoutInflater,
@@ -16,4 +33,50 @@
     ): View? {
         return inflater.inflate(R.layout.activity_mine, container, false)
     }
-}
\ No newline at end of file
+
+    override fun onActivityCreated(savedInstanceState: Bundle?) {
+        mine_name = activity?.findViewById(R.id.mine_name)!!
+        mine_nicheng = activity?.findViewById(R.id.mine_nicheng)!!
+        mine_tx = activity?.findViewById(R.id.mine_tx)!!
+        User.user_name = "张天宇"
+        mine_name.text = User.user_name
+        mine_nicheng.text = User.user_name
+        mine_tx.setImageResource(R.drawable.img_tx)
+        linearLayout1 = activity?.findViewById(R.id.mine_material)!!
+        linearLayout2 = activity?.findViewById(R.id.mine_collection)!!
+        linearLayout3 = activity?.findViewById(R.id.mine_text)!!
+        linearLayout4 = activity?.findViewById(R.id.mine_error)!!
+        linearLayout5 = activity?.findViewById(R.id.mine_privacy)!!
+        linearLayout6 = activity?.findViewById(R.id.mine_setting)!!
+        linearLayout1.setOnClickListener(this)
+        linearLayout2.setOnClickListener(this)
+        linearLayout3.setOnClickListener(this)
+        linearLayout4.setOnClickListener(this)
+        linearLayout5.setOnClickListener(this)
+        linearLayout6.setOnClickListener(this)
+        super.onActivityCreated(savedInstanceState)
+    }
+
+    override fun onClick(v: View?) {
+        when(v?.id){
+            R.id.mine_material->{
+                startActivity(Intent(this.activity, MineMaterialActivity::class.java))
+            }
+            R.id.mine_collection->{
+
+            }
+            R.id.mine_text->{
+
+            }
+            R.id.mine_error->{
+
+            }
+            R.id.mine_privacy->{
+
+            }
+            R.id.mine_setting->{
+
+            }
+        }
+    }
+}
Index: app/src/main/java/com/example/poetrytour/network/ServiceCreator.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.poetrytour.network\r\n\r\nimport retrofit2.Retrofit\r\nimport retrofit2.converter.gson.GsonConverterFactory\r\n\r\nobject ServiceCreator {\r\n//    private const val BASE_URL=\"http://192.168.43.38:8080/\"\r\n    private const val BASE_URL=\"http://192.168.2.217:8080/\"\r\n//    private const val BASE_URL=\"http://10.0.2.2:8080/\"\r\n//    private const val BASE_URL=\"http:192.168.2.218:8080/\"\r\n    private val retrofit=Retrofit.Builder()\r\n        .baseUrl(BASE_URL)\r\n        .addConverterFactory(GsonConverterFactory.create())\r\n        .build()\r\n\r\n    fun <T> create(serviceClass:Class<T>):T= retrofit.create(serviceClass)\r\n\r\n    inline fun <reified T> create():T= create(T::class.java)\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/poetrytour/network/ServiceCreator.kt b/app/src/main/java/com/example/poetrytour/network/ServiceCreator.kt
--- a/app/src/main/java/com/example/poetrytour/network/ServiceCreator.kt	(revision 6b48c0207737fdb97ddaa6f92d9ffe704ef5fa3a)
+++ b/app/src/main/java/com/example/poetrytour/network/ServiceCreator.kt	(date 1676459867973)
@@ -5,7 +5,7 @@
 
 object ServiceCreator {
 //    private const val BASE_URL="http://192.168.43.38:8080/"
-    private const val BASE_URL="http://192.168.2.217:8080/"
+    private const val BASE_URL="http://192.168.0.182:8080/"
 //    private const val BASE_URL="http://10.0.2.2:8080/"
 //    private const val BASE_URL="http:192.168.2.218:8080/"
     private val retrofit=Retrofit.Builder()
Index: app/src/main/res/values/themes.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources xmlns:tools=\"http://schemas.android.com/tools\">\r\n    <!-- Base application theme. -->\r\n    <style name=\"Theme.PoetryTour\" parent=\"Theme.AppCompat.Light.NoActionBar\">\r\n        <!-- Primary brand color. -->\r\n        <item name=\"colorPrimary\">@color/purple_500</item>\r\n        <item name=\"colorPrimaryVariant\">@color/purple_700</item>\r\n        <item name=\"colorOnPrimary\">@color/white</item>\r\n        <!-- Secondary brand color. -->\r\n        <item name=\"colorSecondary\">@color/teal_200</item>\r\n        <item name=\"colorSecondaryVariant\">@color/teal_700</item>\r\n        <item name=\"colorOnSecondary\">@color/black</item>\r\n        <!-- Status bar color. -->\r\n        <item name=\"android:statusBarColor\" tools:targetApi=\"l\">?attr/colorPrimaryVariant</item>\r\n        <!-- Customize your theme here. -->\r\n\r\n    </style>\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values/themes.xml b/app/src/main/res/values/themes.xml
--- a/app/src/main/res/values/themes.xml	(revision 6b48c0207737fdb97ddaa6f92d9ffe704ef5fa3a)
+++ b/app/src/main/res/values/themes.xml	(date 1676459867989)
@@ -14,4 +14,10 @@
         <!-- Customize your theme here. -->
 
     </style>
+    <style name="Theme.PoetryTour.NoActionBar">
+        <item name="windowActionBar">false</item>
+        <item name="windowNoTitle">true</item>
+    </style>
+    <style name="Theme.PoetryTour.AppBarOverlay" parent="ThemeOverlay.AppCompat.Dark.ActionBar" />
+    <style name="Theme.PoetryTour.PopupOverlay" parent="ThemeOverlay.AppCompat.Light" />
 </resources>
\ No newline at end of file
Index: app/src/main/res/values/strings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources>\r\n    <string name=\"app_name\">Poetry Tour</string>\r\n    <string name=\"title_activity_login\">LoginActivity</string>\r\n    <string name=\"prompt_email\">Email</string>\r\n    <string name=\"prompt_password\">Password</string>\r\n    <string name=\"action_sign_in\">Sign in or register</string>\r\n    <string name=\"action_sign_in_short\">Sign in</string>\r\n    <string name=\"welcome\">\"Welcome !\"</string>\r\n    <string name=\"invalid_username\">Not a valid username</string>\r\n    <string name=\"invalid_password\">Password must be >5 characters</string>\r\n    <string name=\"login_failed\">\"Login failed\"</string>\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
--- a/app/src/main/res/values/strings.xml	(revision 6b48c0207737fdb97ddaa6f92d9ffe704ef5fa3a)
+++ b/app/src/main/res/values/strings.xml	(date 1676459992510)
@@ -9,4 +9,13 @@
     <string name="invalid_username">Not a valid username</string>
     <string name="invalid_password">Password must be >5 characters</string>
     <string name="login_failed">"Login failed"</string>
+    <string name="title_activity_test">test</string>
+    <!-- Strings used for fragments for navigation -->
+    <string name="first_fragment_label">First Fragment</string>
+    <string name="second_fragment_label">Second Fragment</string>
+    <string name="next">Next</string>
+    <string name="previous">Previous</string>
+
+    <string name="hello_first_fragment">Hello first fragment</string>
+    <string name="hello_second_fragment">Hello second fragment. Arg: %1$s</string>
 </resources>
\ No newline at end of file
Index: app/src/main/res/values/dimens.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources>\r\n    <!-- Default screen margins, per the Android Design guidelines. -->\r\n <dimen name=\"activity_horizontal_margin\">16dp</dimen>\r\n <dimen name=\"activity_vertical_margin\">16dp</dimen>\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values/dimens.xml b/app/src/main/res/values/dimens.xml
--- a/app/src/main/res/values/dimens.xml	(revision 6b48c0207737fdb97ddaa6f92d9ffe704ef5fa3a)
+++ b/app/src/main/res/values/dimens.xml	(date 1676459992513)
@@ -2,4 +2,5 @@
     <!-- Default screen margins, per the Android Design guidelines. -->
  <dimen name="activity_horizontal_margin">16dp</dimen>
  <dimen name="activity_vertical_margin">16dp</dimen>
+    <dimen name="fab_margin">16dp</dimen>
 </resources>
\ No newline at end of file
Index: app/src/main/java/com/example/poetrytour/MainActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.poetrytour\r\n\r\nimport android.content.Intent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport androidx.fragment.app.Fragment\r\nimport androidx.viewpager2.widget.ViewPager2\r\nimport com.example.poetrytour.tool.BottomNavigation\r\nimport com.example.poetrytour.ui.fragments.FragmentAdapter\r\nimport com.example.poetrytour.ui.fragments.MessageFragment\r\nimport com.example.poetrytour.ui.fragments.MineFragment\r\nimport com.example.poetrytour.ui.fragments.PostFragment\r\nimport com.example.poetrytour.ui.message.WebSocketService\r\nimport kotlinx.android.synthetic.main.activity_main.*\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n    private lateinit var serviceIntent: Intent\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_main)\r\n\r\n        BottomNavigation.initialize(R.id.travel,view_pager,bottom_navigation)\r\n        val listOfFragment = listOf<Fragment>(PostFragment(), MessageFragment(),MineFragment())\r\n        val viewpager2Adapter = FragmentAdapter(this,listOfFragment)\r\n        view_pager.adapter=viewpager2Adapter\r\n//        view_pager.setUserInputEnabled(false);\r\n        view_pager.offscreenPageLimit=3\r\n        view_pager.isUserInputEnabled=false\r\n        view_pager.registerOnPageChangeCallback(object : ViewPager2.OnPageChangeCallback(){\r\n            override fun onPageSelected(position: Int) {\r\n               bottom_navigation.selectedItemId = when(position){\r\n                    0 -> R.id.travel\r\n                    1 -> R.id.message\r\n                    2 -> R.id.mine\r\n                   else -> R.id.travel\r\n               }\r\n                super.onPageSelected(position)\r\n            }\r\n        })\r\n\r\n        serviceIntent = Intent(this,WebSocketService::class.java)\r\n        startService(serviceIntent)\r\n\r\n    }\r\n\r\n    override fun onResume() {\r\n        super.onResume()\r\n        startService(serviceIntent)\r\n    }\r\n\r\n    override fun onDestroy() {\r\n        stopService(serviceIntent)\r\n        super.onDestroy()\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/poetrytour/MainActivity.kt b/app/src/main/java/com/example/poetrytour/MainActivity.kt
--- a/app/src/main/java/com/example/poetrytour/MainActivity.kt	(revision 6b48c0207737fdb97ddaa6f92d9ffe704ef5fa3a)
+++ b/app/src/main/java/com/example/poetrytour/MainActivity.kt	(date 1676459992529)
@@ -3,6 +3,7 @@
 import android.content.Intent
 import androidx.appcompat.app.AppCompatActivity
 import android.os.Bundle
+import android.widget.LinearLayout
 import androidx.fragment.app.Fragment
 import androidx.viewpager2.widget.ViewPager2
 import com.example.poetrytour.tool.BottomNavigation
@@ -41,7 +42,6 @@
 
         serviceIntent = Intent(this,WebSocketService::class.java)
         startService(serviceIntent)
-
     }
 
     override fun onResume() {
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DesignSurface\">\r\n    <option name=\"filePathToZoomLevelMap\">\r\n      <map>\r\n        <entry key=\"..\\:/Users/lenovo/Documents/Tencent Files/3246922785/FileRecv/MobileFile/fronted/fronted/app/src/main/res/drawable-v24/edit_style.xml\" value=\"0.1\" />\r\n        <entry key=\"..\\:/Users/lenovo/Documents/Tencent Files/3246922785/FileRecv/MobileFile/fronted/fronted/app/src/main/res/layout/activity_main.xml\" value=\"0.27447916666666666\" />\r\n        <entry key=\"..\\:/Users/lenovo/Documents/Tencent Files/3246922785/FileRecv/MobileFile/fronted/fronted/app/src/main/res/layout/activity_message.xml\" value=\"0.27447916666666666\" />\r\n        <entry key=\"..\\:/Users/lenovo/Documents/Tencent Files/3246922785/FileRecv/MobileFile/fronted/fronted/app/src/main/res/layout/activity_posts.xml\" value=\"0.27447916666666666\" />\r\n        <entry key=\"..\\:/Users/lenovo/Documents/Tencent Files/3246922785/FileRecv/MobileFile/fronted/fronted/app/src/main/res/layout/item.xml\" value=\"0.27447916666666666\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_11\" default=\"true\" project-jdk-name=\"1.8\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
--- a/.idea/misc.xml	(revision 6b48c0207737fdb97ddaa6f92d9ffe704ef5fa3a)
+++ b/.idea/misc.xml	(date 1676459992529)
@@ -4,10 +4,15 @@
     <option name="filePathToZoomLevelMap">
       <map>
         <entry key="..\:/Users/lenovo/Documents/Tencent Files/3246922785/FileRecv/MobileFile/fronted/fronted/app/src/main/res/drawable-v24/edit_style.xml" value="0.1" />
+        <entry key="..\:/Users/lenovo/Documents/Tencent Files/3246922785/FileRecv/MobileFile/fronted/fronted/app/src/main/res/drawable/diliver_line.xml" value="0.1925" />
         <entry key="..\:/Users/lenovo/Documents/Tencent Files/3246922785/FileRecv/MobileFile/fronted/fronted/app/src/main/res/layout/activity_main.xml" value="0.27447916666666666" />
         <entry key="..\:/Users/lenovo/Documents/Tencent Files/3246922785/FileRecv/MobileFile/fronted/fronted/app/src/main/res/layout/activity_message.xml" value="0.27447916666666666" />
+        <entry key="..\:/Users/lenovo/Documents/Tencent Files/3246922785/FileRecv/MobileFile/fronted/fronted/app/src/main/res/layout/activity_mine.xml" value="0.278125" />
+        <entry key="..\:/Users/lenovo/Documents/Tencent Files/3246922785/FileRecv/MobileFile/fronted/fronted/app/src/main/res/layout/activity_mine_material.xml" value="0.278125" />
+        <entry key="..\:/Users/lenovo/Documents/Tencent Files/3246922785/FileRecv/MobileFile/fronted/fronted/app/src/main/res/layout/activity_post.xml" value="0.278125" />
         <entry key="..\:/Users/lenovo/Documents/Tencent Files/3246922785/FileRecv/MobileFile/fronted/fronted/app/src/main/res/layout/activity_posts.xml" value="0.27447916666666666" />
         <entry key="..\:/Users/lenovo/Documents/Tencent Files/3246922785/FileRecv/MobileFile/fronted/fronted/app/src/main/res/layout/item.xml" value="0.27447916666666666" />
+        <entry key="..\:/Users/lenovo/Documents/Tencent Files/3246922785/FileRecv/MobileFile/fronted/fronted/app/src/main/res/layout/post_item.xml" value="0.175" />
       </map>
     </option>
   </component>
@@ -17,4 +22,11 @@
   <component name="ProjectType">
     <option name="id" value="Android" />
   </component>
+  <component name="VisualizationToolProject">
+    <option name="state">
+      <ProjectState>
+        <option name="scale" value="0.278125" />
+      </ProjectState>
+    </option>
+  </component>
 </project>
\ No newline at end of file
Index: build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nplugins {\r\n    id 'com.android.application' version '7.2.1' apply false\r\n    id 'com.android.library' version '7.2.1' apply false\r\n    id 'org.jetbrains.kotlin.android' version '1.7.0' apply false\r\n}\r\n\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/build.gradle b/build.gradle
--- a/build.gradle	(revision 6b48c0207737fdb97ddaa6f92d9ffe704ef5fa3a)
+++ b/build.gradle	(date 1676459992544)
@@ -2,7 +2,7 @@
 plugins {
     id 'com.android.application' version '7.2.1' apply false
     id 'com.android.library' version '7.2.1' apply false
-    id 'org.jetbrains.kotlin.android' version '1.7.0' apply false
+    id 'org.jetbrains.kotlin.android' version '1.7.10' apply false
 }
 
 
Index: app/build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>buildscript {\r\n    repositories {\r\n        maven { url 'https://maven.aliyun.com/repository/google' }\r\n        maven { url 'https://maven.aliyun.com/repository/jcenter' }\r\n        maven { url 'https://jitpack.io'}\r\n        maven { url 'https://maven.google.com' }\r\n        maven {url 'https://mvnrepository.com/artifact'}\r\n    }\r\n\r\n    dependencies {\r\n        classpath 'com.android.tools.build:gradle:3.5.1'\r\n    }\r\n}\r\n\r\nplugins {\r\n    id 'com.android.application'\r\n    id 'org.jetbrains.kotlin.android'\r\n}\r\napply plugin: 'kotlin-android-extensions'\r\n\r\n\r\nandroid {\r\n    compileSdk 32\r\n    \r\n\r\n    defaultConfig {\r\n        applicationId \"com.example.poetrytour\"\r\n        minSdk 21\r\n        targetSdk 32\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = '1.8'\r\n    }\r\n    buildFeatures {\r\n        viewBinding true\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\ndependencies {\r\n\r\n    //未读气泡\r\n    implementation 'com.github.bingoogolapple.BGABadgeView-Android:api:1.2.0'\r\n    annotationProcessor 'com.github.bingoogolapple.BGABadgeView-Android:compiler:1.2.0'\r\n\r\n    //    recyclerview依赖\r\n    implementation \"androidx.recyclerview:recyclerview:1.2.1\"\r\n\r\n    //  加载图片\r\n    implementation 'com.github.bumptech.glide:glide:4.13.0'\r\n    annotationProcessor 'com.github.bumptech.glide:compiler:4.13.0'\r\n\r\n\r\n    //    retrofit依赖\r\n    implementation 'com.squareup.retrofit2:retrofit:2.6.1'\r\n    implementation 'com.squareup.retrofit2:converter-gson:2.6.1'\r\n\r\n    //    gson依赖\r\n    implementation 'com.google.code.gson:gson:2.8.5'\r\n\r\n    //    material库依赖\r\n    implementation 'com.google.android.material:material:1.6.0'\r\n\r\n    //    viewpager2依赖\r\n    implementation\"androidx.viewpager2:viewpager2:1.0.0\"\r\n\r\n    //   websocket\r\n    implementation 'org.java-websocket:Java-WebSocket:1.5.1'\r\n\r\n    //    eventbus\r\n    implementation 'org.greenrobot:eventbus:3.3.1'\r\n\r\n    //未读小红点\r\n    implementation 'com.github.o199666:CwjDotView:1.1'\r\n    implementation \"com.github.nekocode:Badge:2.1\"\r\n    //fastjson\r\n    implementation 'com.alibaba:fastjson:1.1.71.android'\r\n\r\n    implementation 'com.makeramen:roundedimageview:2.3.0'\r\n\r\n\r\n    //轮播图\r\n    implementation 'io.github.youth5201314:banner:2.2.2'\r\n\r\n    implementation 'androidx.core:core-ktx:1.7.0'\r\n    implementation 'androidx.appcompat:appcompat:1.3.0'\r\n    implementation 'com.google.android.material:material:1.4.0'\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'\r\n    implementation 'androidx.annotation:annotation:1.2.0'\r\n    implementation 'androidx.lifecycle:lifecycle-livedata-ktx:2.3.1'\r\n    implementation 'androidx.lifecycle:lifecycle-viewmodel-ktx:2.3.1'\r\n    testImplementation 'junit:junit:4.13.2'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>GBK
===================================================================
diff --git a/app/build.gradle b/app/build.gradle
--- a/app/build.gradle	(revision 6b48c0207737fdb97ddaa6f92d9ffe704ef5fa3a)
+++ b/app/build.gradle	(date 1676459992560)
@@ -58,6 +58,8 @@
 
     //未读气泡
     implementation 'com.github.bingoogolapple.BGABadgeView-Android:api:1.2.0'
+    implementation 'androidx.navigation:navigation-fragment-ktx:2.3.5'
+    implementation 'androidx.navigation:navigation-ui-ktx:2.3.5'
     annotationProcessor 'com.github.bingoogolapple.BGABadgeView-Android:compiler:1.2.0'
 
     //    recyclerview依赖
Index: app/src/main/res/values-w600dp/dimens.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources>\r\n <dimen name=\"activity_horizontal_margin\">48dp</dimen>\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values-w600dp/dimens.xml b/app/src/main/res/values-w600dp/dimens.xml
--- a/app/src/main/res/values-w600dp/dimens.xml	(revision 6b48c0207737fdb97ddaa6f92d9ffe704ef5fa3a)
+++ b/app/src/main/res/values-w600dp/dimens.xml	(date 1676459992560)
@@ -1,3 +1,4 @@
 <resources>
  <dimen name="activity_horizontal_margin">48dp</dimen>
+    <dimen name="fab_margin">48dp</dimen>
 </resources>
\ No newline at end of file
Index: app/src/main/java/com/example/poetrytour/ui/message/WebSocketService.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.poetrytour.ui.message\r\n\r\nimport android.app.Service\r\nimport android.content.Intent\r\nimport android.os.IBinder\r\nimport android.util.Log\r\nimport com.alibaba.fastjson.JSON\r\nimport com.example.poetrytour.model.MessageData\r\nimport com.example.poetrytour.ui.User\r\nimport org.greenrobot.eventbus.EventBus\r\nimport org.greenrobot.eventbus.Subscribe\r\nimport org.greenrobot.eventbus.ThreadMode\r\nimport org.java_websocket.client.WebSocketClient\r\nimport org.java_websocket.enums.ReadyState\r\nimport java.net.URISyntaxException\r\n\r\nclass WebSocketService:Service() {\r\n//    private val url=\"192.168.43.38\"\r\n    private val url=\"192.168.2.217\"\r\n    private lateinit var webSocketClient: WebSocketClient\r\n    private lateinit var netThread: NetWorkThread\r\n\r\n    override fun onBind(intent: Intent): IBinder {\r\n        TODO(\"Return the communication channel to the service.\")\r\n    }\r\n\r\n    override fun onCreate() {\r\n        super.onCreate()\r\n        if (!this::webSocketClient.isInitialized){\r\n            webSocketClient = MyWebSocket(\"ws://$url:8080/webSocket/${User.user_id}\")\r\n        }\r\n\r\n        netThread = NetWorkThread(webSocketClient)\r\n        netThread.start()\r\n        Log.d(\"ServiceNet\",\"已连接\")\r\n\r\n        EventBus.getDefault().register(this)\r\n\r\n    }\r\n\r\n    override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\r\n        Log.d(\"ServiceNet\",webSocketClient.readyState.toString())\r\n        return super.onStartCommand(intent, flags, startId)\r\n    }\r\n\r\n    override fun onDestroy() {\r\n        if (this::webSocketClient.isInitialized){\r\n            webSocketClient.closeBlocking()\r\n        }\r\n        netThread.exit = false\r\n        super.onDestroy()\r\n        EventBus.getDefault().unregister(this);\r\n    }\r\n\r\n\r\n\r\n    class NetWorkThread(var SocketClient: WebSocketClient) : Thread(){\r\n        var exit: Boolean = true\r\n        override fun run() {\r\n            super.run()\r\n            try {\r\n                if (SocketClient.connectBlocking()) {\r\n                    Log.i(\"WebSocketService\", \"run: 连接服务器成功\")\r\n                } else {\r\n                    Log.i(\"WebSocketService\", \"run: 连接服务器失败\")\r\n                }\r\n                while(exit){\r\n                    sleep(2000)\r\n                }\r\n            } catch (e: InterruptedException) {\r\n                e.printStackTrace()\r\n            } catch (e: URISyntaxException) {\r\n                e.printStackTrace()\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    class updateMessageItem(val messageData: MessageData){}\r\n    @Subscribe(threadMode = ThreadMode.MAIN)\r\n    fun updateMessageList(message: updateMessageItem){\r\n        val messageData=message.messageData\r\n        Log.d(\"update\",\"生效\")\r\n        MessageItemViewModel.setMessageData(messageData)\r\n    }\r\n\r\n    @Subscribe(threadMode = ThreadMode.BACKGROUND)\r\n    fun sendMessage(messageData: MessageData){\r\n        if (messageData!=null && this::webSocketClient.isInitialized){\r\n            if (webSocketClient.readyState == ReadyState.OPEN){\r\n                try {\r\n                    webSocketClient.send(JSON.toJSONString(messageData))\r\n                    Log.d(\"WebSocketService\",\"发送消息${JSON.toJSONString(messageData)}\")\r\n                }catch (e:Exception){\r\n                    e.printStackTrace()\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/poetrytour/ui/message/WebSocketService.kt b/app/src/main/java/com/example/poetrytour/ui/message/WebSocketService.kt
--- a/app/src/main/java/com/example/poetrytour/ui/message/WebSocketService.kt	(revision 6b48c0207737fdb97ddaa6f92d9ffe704ef5fa3a)
+++ b/app/src/main/java/com/example/poetrytour/ui/message/WebSocketService.kt	(date 1676459992576)
@@ -16,7 +16,7 @@
 
 class WebSocketService:Service() {
 //    private val url="192.168.43.38"
-    private val url="192.168.2.217"
+    private val url="192.168.0.182"
     private lateinit var webSocketClient: WebSocketClient
     private lateinit var netThread: NetWorkThread
 
Index: app/src/main/res/values-land/dimens.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources>\r\n <dimen name=\"activity_horizontal_margin\">48dp</dimen>\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values-land/dimens.xml b/app/src/main/res/values-land/dimens.xml
--- a/app/src/main/res/values-land/dimens.xml	(revision 6b48c0207737fdb97ddaa6f92d9ffe704ef5fa3a)
+++ b/app/src/main/res/values-land/dimens.xml	(date 1676459992591)
@@ -1,3 +1,4 @@
 <resources>
  <dimen name="activity_horizontal_margin">48dp</dimen>
+    <dimen name="fab_margin">48dp</dimen>
 </resources>
\ No newline at end of file
Index: app/src/main/res/values-w1240dp/dimens.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources>\r\n <dimen name=\"activity_horizontal_margin\">200dp</dimen>\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values-w1240dp/dimens.xml b/app/src/main/res/values-w1240dp/dimens.xml
--- a/app/src/main/res/values-w1240dp/dimens.xml	(revision 6b48c0207737fdb97ddaa6f92d9ffe704ef5fa3a)
+++ b/app/src/main/res/values-w1240dp/dimens.xml	(date 1676459992591)
@@ -1,3 +1,4 @@
 <resources>
  <dimen name="activity_horizontal_margin">200dp</dimen>
+    <dimen name="fab_margin">200dp</dimen>
 </resources>
\ No newline at end of file
